/*
 !{id:msgpack.codec.js,ver:1.05,license:"MIT",author:"uupaa.js@gmail.com"} */
this.msgpack||function(f){function a(a){this._n=a}function b(a){m="string"===typeof a?k(a):a;d=-1;return j()}function c(b,i,e){var h,g,d;if(null==i)b.push(192);else if(!1===i)b.push(194);else if(!0===i)b.push(195);else switch(typeof i){case "number":i!==i?b.push(203,255,255,255,255,255,255,255,255):Infinity===i?b.push(203,127,240,0,0,0,0,0,0):Math.floor(i)===i?0>i?-32<=i?b.push(224+i+32):-128<i?b.push(208,i+256):-32768<i?(i+=65536,b.push(209,i>>8,i&255)):-2147483648<i?(i+=4294967296,b.push(210,i>>>
24,i>>16&255,i>>8&255,i&255)):(g=Math.floor(i/4294967296),i&=4294967295,b.push(211,g>>24&255,g>>16&255,g>>8&255,g&255,i>>24&255,i>>16&255,i>>8&255,i&255)):128>i?b.push(i):256>i?b.push(204,i):65536>i?b.push(205,i>>8,i&255):4294967296>i?b.push(206,i>>>24,i>>16&255,i>>8&255,i&255):(g=Math.floor(i/4294967296),i&=4294967295,b.push(207,g>>24&255,g>>16&255,g>>8&255,g&255,i>>24&255,i>>16&255,i>>8&255,i&255)):((g=0>i)&&(i*=-1),d=Math.log(i)/0.6931471805599453+1023|0,h=i*Math.pow(2,1075-d),i=h&4294967295,g&&
(d|=2048),g=h/4294967296&1048575|d<<20,b.push(203,g>>24&255,g>>16&255,g>>8&255,g&255,i>>24&255,i>>16&255,i>>8&255,i&255));break;case "string":e=i.length;d=b.length;b.push(0);for(g=0;g<e;++g)h=i.charCodeAt(g),128>h?b.push(h&127):2048>h?b.push(h>>>6&31|192,h&63|128):55296>h||57343<h?b.push(h>>>12&15|224,h>>>6&63|128,h&63|128):(h=(h-55296<<10|i.charCodeAt(++g)-56320)+65536,b.push(h>>>18|240,h>>>12&63|128,h>>>6&63|128,h&63|128));h=b.length-d-1;32>h?b[d]=160+h:65536>h?b.splice(d,1,218,h>>8,h&255):4294967296>
h&&b.splice(d,1,219,h>>>24,h>>16&255,h>>8&255,h&255);break;default:if(++e>=r)return p=1,[];if(s(i)){h=i.length;16>h?b.push(144+h):65536>h?b.push(220,h>>8,h&255):4294967296>h&&b.push(221,h>>>24,h>>16&255,h>>8&255,h&255);for(g=0;g<h;++g)c(b,i[g],e)}else if(i instanceof a)h=i.valueOf(),(g=0>h)&&(h*=-1),d=Math.log(h)/0.6931471805599453+1023|0,h*=Math.pow(2,1075-d),i=h&4294967295,g&&(d|=2048),g=h/4294967296&1048575|d<<20,b.push(203,g>>24&255,g>>16&255,g>>8&255,g&255,i>>24&255,i>>16&255,i>>8&255,i&255);
else if(q(i)||i&&"[object Object]"!==Object.prototype.toString.call(i)&&"buffer"in i&&"[object ArrayBuffer]"===Object.prototype.toString.call(i.buffer)){i=q(i)?new Uint8Array(i):new Uint8Array(i.buffer);h=i.byteLength;256>h?b.push(196,h&255):65536>h?b.push(196,h>>8,h&255):4294967296>h&&b.push(198,h>>>24,h>>16&255,h>>8&255,h&255);for(g=0;g<h;g++)b.push(i[g]);delete i}else{d=b.length;b.push(0);h=0;for(g in i)++h,c(b,g,e),c(b,i[g],e);16>h?b[d]=128+h:65536>h?b.splice(d,1,222,h>>8,h&255):4294967296>h&&
b.splice(d,1,223,h>>>24,h>>16&255,h>>8&255,h&255)}}return b}function j(){var a,b,c;b=0;var h,g;g=m;c=g[++d];a=g.length;if(224<=c)return c-256;if(192>c){if(128>c)return c;144>c?(b=c-128,c=128):160>c?(b=c-144,c=144):(b=c-160,c=160)}switch(c){case 192:return null;case 194:return!1;case 195:return!0;case 202:if(a<d+4+1)break;b=16777216*g[++d]+(g[++d]<<16)+(g[++d]<<8)+g[++d];a=b>>23&255;h=b&8388607;return!b||2147483648===b?0:255===a?h?NaN:Infinity:(b&2147483648?-1:1)*(h|8388608)*Math.pow(2,a-127-23);case 203:if(a<
d+8+1)break;b=16777216*g[++d]+(g[++d]<<16)+(g[++d]<<8)+g[++d];c=b&2147483648;a=b>>20&2047;h=b&1048575;if(!b||2147483648===b)return d+=4,0;if(2047===a)return d+=4,h?NaN:Infinity;b=16777216*g[++d]+(g[++d]<<16)+(g[++d]<<8)+g[++d];return(c?-1:1)*((h|1048576)*Math.pow(2,a-1023-20)+b*Math.pow(2,a-1023-52));case 207:if(a<d+8+1)break;b=16777216*g[++d]+(g[++d]<<16)+(g[++d]<<8)+g[++d];return 4294967296*b+16777216*g[++d]+(g[++d]<<16)+(g[++d]<<8)+g[++d];case 206:if(a<d+4+1)break;b+=16777216*g[++d]+(g[++d]<<16);
case 205:if(a<d+2+1)break;b+=g[++d]<<8;case 204:if(a<d+1+1)break;return b+g[++d];case 211:if(a<d+8+1)break;b=g[++d];return b&128?-1*(72057594037927936*(b^255)+281474976710656*(g[++d]^255)+1099511627776*(g[++d]^255)+4294967296*(g[++d]^255)+16777216*(g[++d]^255)+65536*(g[++d]^255)+256*(g[++d]^255)+(g[++d]^255)+1):72057594037927936*b+281474976710656*g[++d]+1099511627776*g[++d]+4294967296*g[++d]+16777216*g[++d]+65536*g[++d]+256*g[++d]+g[++d];case 210:if(a<d+4+1)break;b=16777216*g[++d]+(g[++d]<<16)+(g[++d]<<
8)+g[++d];return 2147483648>b?b:b-4294967296;case 209:if(a<d+2+1)break;b=(g[++d]<<8)+g[++d];return 32768>b?b:b-65536;case 208:if(a<d+1+1)break;b=g[++d];return 128>b?b:b-256;case 219:if(a<d+4+1)break;b+=16777216*g[++d]+(g[++d]<<16);case 218:if(a<d+2+1)break;b+=g[++d]<<8;case 217:if(a<d+1)break;b+=g[++d];case 160:if(a<d+b+1)break;h=[];a=d;for(b=a+b;a<b;)c=g[++a],240<=c?(c=((c&3)<<18|(g[++a]&63)<<12|(g[++a]&63)<<6|g[++a]&63)-65536,h.push(55296+(c>>10)),h.push(56320+(c&1023))):h.push(128>c?c:224>c?(c&
31)<<6|g[++a]&63:(c&15)<<12|(g[++a]&63)<<6|g[++a]&63);d=a;return 10240>h.length?o.apply(null,h):e(h);case 198:if(a<d+4+1)break;b+=16777216*g[++d]+(g[++d]<<16);case 197:if(a<d+2+1)break;b+=g[++d]<<8;case 196:if(a<d+1)break;b+=g[++d];if(a<d+b+1)break;h=[];a=d;for(b=a+b;a<b;)c=g[++a],h.push(c);d=a;return 10240>h.length?o.apply(null,h):e(h);case 223:if(a<d+4+1)break;b+=16777216*g[++d]+(g[++d]<<16);case 222:if(a<d+2+1)break;b+=(g[++d]<<8)+g[++d];case 128:for(g={};b--;){if(a<d+1+1)return;c=j();if(void 0===
c)return;h=c;c=j();if(void 0===c)return;g[h]=c}return g;case 221:if(a<d+4+1)break;b+=16777216*g[++d]+(g[++d]<<16);case 220:if(a<d+2+1)break;b+=(g[++d]<<8)+g[++d];case 144:for(h=[];b--;){c=j();if(void 0===c)return;h.push(c)}return h}}function e(a){try{var b=o.apply(this,a);if(a.length!=b.length)throw"toString failed";return b}catch(c){}for(var b=[],d=0,e=a.length,j=n;d<e;++d)b[d]=j[a[d]];return b.join("")}function k(b){var a=[],c=l,d=b.split(""),e=-1,j;j=d.length;for(b=j%8;b--;)++e,a[e]=c[d[e]];for(b=
j>>3;b--;)a.push(c[d[++e]],c[d[++e]],c[d[++e]],c[d[++e]],c[d[++e]],c[d[++e]],c[d[++e]],c[d[++e]]);return a}f.msgpack={tofloat:a,unpacker:function(){var a={_chunk:[],_cidx:0,feed:function(b){b="string"===typeof b?k(b):b;a._chunk=a._chunk.concat(b)},unpack:function(){var c=b(a._chunk);if(void 0!==c)return a._cidx=d+1,a._chunk=a._chunk.slice(a._cidx),c},refresh:function(){a._chunk=[];a._cidx=0}};return a},pack:function(a,b){p=0;var d=c([],a,0);return p?!1:b?e(d):d},unpack:b};var l={},n={},m=[],d=0,p=
0,s=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},q=function(a){return"[object ArrayBuffer]"===Object.prototype.toString.call(a)},o=String.fromCharCode,r=512;a.prototype=new Number;a.prototype.valueOf=function(){return this._n};a.prototype.toString=function(){return this._n.toString()};(function(){for(var a=0,b;256>a;++a)b=o(a),l[b]=a,n[a]=b;for(a=128;256>a;++a)l[o(63232+a)]=a})()}(this);/*

 The MIT License (MIT)

 Copyright 2015 Sony Corporation

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
*/
this.linear||function(f){f.linear=function(){};f.linear.version="2.5.3";f.linear.sign="5d2143d317b5e7703cf076ac4e2fb5b93f1fca95";f.linear.tofloat=function(a){return new msgpack.tofloat(a)};f.linear.tobinary=function(a){var b=Object.prototype.toString.call(a);if("[object String]"===b){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}if("[object ArrayBuffer]"===b)return a;if(a&&"[object Object]"!==b&&"buffer"in a&&"[object ArrayBuffer]"===Object.prototype.toString.call(a.buffer))return a.buffer;
throw"can not convert into binary";};f.linear.base64=function(){var a=function(a){for(var c={},j=0,e=a.length;j<e;++j)c[a.charAt(j)]=j;return c}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");return{encode:function(a){var c=0;if("string"!==typeof a)throw"INVALID_CHARACTER_ERR";for(;a.length%3;)a+="\x00",c++;a=a.replace(/[\x00-\xFF]{3}/g,function(a){a=a.charCodeAt(0)<<16|a.charCodeAt(1)<<8|a.charCodeAt(2);return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>
18)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a&63)});if(!c)return a;for(a=a.substr(0,a.length-c);c--;)a+="=";return a},decode:function(b){var c=0;if("string"!==typeof b||b.length%4||null!==b.match(/[^A-Za-z0-9\+\/=]/)||-1!==b.indexOf("=")&&b.indexOf("=")<b.length-2)throw"INVALID_CHARACTER_ERR";for(b=
b.replace(/[^A-Za-z0-9\+\/]/g,"");b.length%4;)b+="A",c++;if(2<c)throw"INVALID_CHARACTER_ERR";b=b.replace(/[A-Za-z0-9\+\/]{4}/g,function(b){b=a[b.charAt(0)]<<18|a[b.charAt(1)]<<12|a[b.charAt(2)]<<6|a[b.charAt(3)];return String.fromCharCode(b>>16)+String.fromCharCode(b>>8&255)+String.fromCharCode(b&255)});1<=c&&(b=b.substring(0,b.length-[0,1,2][c]));return b}}}();f.linear.btoa=function(a){var b=f.btoa||f.linear.base64.encode;if("string"!==typeof a)throw"INVALID_CHARACTER_ERR";return b(a)};f.linear.atob=
function(a){var b=f.atob||f.linear.base64.decode;if("string"!==typeof a)throw"INVALID_CHARACTER_ERR";return b(a)};f.linear.extend=function(a,b){var c=new a;if(!b)return c;for(var f in b)c[f]!==b[f]&&(c[f]=b[f]);return c};f.linear.codec=function(){this.type=void 0};f.linear.codec.prototype.encode=function(a){return a};f.linear.codec.prototype.decode=function(a){return a};f.linear.codec.prototype.refresh=function(){};f.linear.codec.plain=function(){this.type="plain";return f.linear.extend(f.linear.codec,
this)};f.linear.codec.msgpack=function(){this.type="msgpack";this.unpacker=new msgpack.unpacker;return f.linear.extend(f.linear.codec,this)};f.linear.codec.msgpack.prototype.encode=function(a){return msgpack.pack(a)};f.linear.codec.msgpack.prototype.decode=function(a){var b=[];for(this.unpacker.feed(a);void 0!==(a=this.unpacker.unpack());)b.push(a);return b};f.linear.codec.msgpack.prototype.refresh=function(){this.unpacker.refresh()};f.linear.protocol=function(){this.codec=this.type=void 0};f.linear.protocol.prototype.request=
function(){throw Error("method is not allowed");};f.linear.protocol.prototype.response=function(){throw Error("method is not allowed");};f.linear.protocol.prototype.notify=function(){throw Error("method is not allowed");};f.linear.protocol.prototype.onmessage=function(a){return a};f.linear.protocol.prototype.reset=function(){};f.linear.protocol.plain=function(){this.type="plain";this.codec=new linear.codec.plain;return f.linear.extend(f.linear.protocol,this)};f.linear.protocol.plain.prototype.onmessage=
function(a){var b=[];a&&b.push({type:"notify",data:{name:void 0,data:a}});return b};f.linear.protocol.linear=function(){this.type="linear";this.msgid=0;this.codec=new f.linear.codec.msgpack;this.requests={};return f.linear.extend(f.linear.protocol,this)};f.linear.protocol.linear.prototype.request=function(a){var b=this,c={},f;if(a&&!("[object Object]"!==Object.prototype.toString.call(a)||!("method"in a)||!("params"in a))){do b.msgid=4294967295<=b.msgid?0:b.msgid+1;while(b.requests[b.msgid]);f=b.codec.encode([0,
b.msgid,a.method,a.params]);c.id=b.msgid;c.onresponse=a.onresponse;c.timeout=setTimeout(function(){b.ontimeout(c.id)},0<a.timeout?a.timeout:3E4);b.requests[c.id]=c;return{id:c.id,data:f,timeout:0<a.timeout?a.timeout:3E4}}};f.linear.protocol.linear.prototype.response=function(a){return!a||"[object Object]"!==Object.prototype.toString.call(a)||!("id"in a)?void 0:this.codec.encode([1,a.id,a.error,a.result])};f.linear.protocol.linear.prototype.notify=function(a){return!a||"[object Object]"!==Object.prototype.toString.call(a)||
!("name"in a)||!("data"in a)?void 0:this.codec.encode([2,a.name,a.data])};f.linear.protocol.linear.prototype.ontimeout=function(a){this.requests[a]&&("function"===typeof this.requests[a].onresponse&&this.requests[a].onresponse.call(this,{id:a,error:"timeout",result:null}),delete this.requests[a])};f.linear.protocol.linear.prototype.onmessage=function(a){var b=Object.prototype.toString.call(a),c,j=[],e,k;if("[object String]"===b)try{c=f.linear.atob(a)}catch(l){return console&&console.log("invalid data"),
j}else if("[object ArrayBuffer]"===b){c=[];e=new Uint8Array(a);a=0;for(b=e.length;a<b;a++)c[a]=e[a]}else if("[object Array]"===b||"[object Number]"===b)c=a;else return console&&console.log("invalid data"),j;c=this.codec.decode(c);a=0;for(b=c.length;a<b;++a)switch(c[a][0]){case 0:j.push({type:"request",data:{id:c[a][1],method:c[a][2],params:c[a][3]}});break;case 1:e=c[a][1];this.requests[e]&&(clearTimeout(this.requests.timer),"function"===typeof this.requests[e].onresponse?this.requests[e].onresponse.call(this,
{id:e,error:c[a][2],result:c[a][3]}):j.push({type:"response",data:{id:e,error:c[a][2],result:c[a][3]}}),delete this.requests[e]);break;case 2:e=c[a][1];k=c[a][2];j.push({type:"notify",data:{name:e,data:k}});break;default:console&&console.log("invalid data")}return j};f.linear.protocol.linear.prototype.reset=function(){this.codec.refresh()};f.linear.transport=function(){this.state="disconnected";this.sendbuffer=[];this.num2bin=[];for(var a=0;256>a;++a)this.num2bin[a]=String.fromCharCode(a)};f.linear.transport.create=
function(a){var b,c,f,e,k,l,n,m={},d;for(d in a)"type"===d.toLowerCase()&&(b=a[d]),"channel"===d.toLowerCase()&&(e=a[d]),"host"===d.toLowerCase()&&(c=a[d]),"port"===d.toLowerCase()&&(f=a[d]),"path"===d.toLowerCase()&&(k=a[d]),"usessl"===d.toLowerCase()&&(n=!!a[d]),"options"===d.toLowerCase()&&(l=a[d]);"undefined"===typeof n&&(n=!!location.protocol.match(/https/));b=b||"websocket";c=c||location.hostname;f=parseInt(f||location.port,10)||(n?443:80);e=e||"linear";e=e.match(/^\//)?e:"/"+e;if("websocket"===
b)a=n?"wss://"+c+(443===f?"":":"+f)+e:"ws://"+c+(80===f?"":":"+f)+e;else if("polling"===b)k=k||"cgi/linear.fcgi",k=k.match(/^\//)?k:"/"+k,a=n?"https://"+c+(443===f?"":":"+f)+k:"http://"+c+(80===f?"":":"+f)+k;else{console&&console.log("transport: "+m.type+" is not implemented.");return}m.type=b;m.entry={};m.entry.url=a;m.entry.channel=e;m.entry.options=l;return m};f.linear.transport.prototype.connect=function(a){function b(){e.type="websocket";e.raw=new f.linear.transport.websocket(j);e.raw.onopen=
function(a){e._onopen(a)};e.raw.onclose=e.raw.onerror=function(a){e._onclose(a)};e.raw.onmessage=function(a){e._onmessage(a)};e._onopen()}function c(){j=void 0;e.entry.polling?(e.type="polling",e.raw=new f.linear.transport.polling(e.entry.polling.url,e.entry.polling.channel,e.entry.polling.options,function(){e._onopen()},function(){e._onclose()}),e.raw.onopen=function(a){e._onopen(a)},e.raw.onclose=e.raw.onerror=function(a){e._onclose(a)},e.raw.onmessage=function(a){e._onmessage(a)}):e._onclose()}
var j,e=this;if(!("connecting"===e.state||"connected"===e.state))if(e.state="connecting",a=a&&a.timeout?a.timeout:3E4,e.entry.websocket){try{j=new WebSocket(e.entry.websocket.url)}catch(k){if(!e.entry.polling){e._onclose();return}e.type="polling";e.raw=new f.linear.transport.polling(e.entry.polling.url,e.entry.polling.channel,e.entry.polling.options,function(){e._onopen()},function(){e._onclose()});e.raw.onopen=function(a){e._onopen(a)};e.raw.onclose=e.raw.onerror=function(a){e._onclose(a)};e.raw.onmessage=
function(a){e._onmessage(a)};return}j.onopen=b;j.onclose=c;setTimeout(function(){"connecting"===e.state&&c()},a)}else e.entry.polling?(e.type="polling",e.raw=new f.linear.transport.polling(e.entry.polling.url,e.entry.polling.channel,e.entry.polling.options,function(){e._onopen()},function(){e._onclose()}),e.raw.onopen=function(a){e._onopen(a)},e.raw.onclose=e.raw.onerror=function(a){e._onclose(a)},e.raw.onmessage=function(a){e._onmessage(a)},setTimeout(function(){"connecting"===e.state&&e._onclose()},
a)):e._onclose()};f.linear.transport.prototype._onopen=function(a){if("connecting"===this.state){this.state="connected";for(var b=0,c=this.sendbuffer.length;b<c;++b)this.send(this.sendbuffer[b]);this.sendbuffer=[];if("function"===typeof this.onopen)this.onopen(a)}};f.linear.transport.prototype._onclose=function(a){if("disconnected"!==this.state&&(this.state="disconnected","function"===typeof this.onclose))this.onclose(a)};f.linear.transport.prototype._onmessage=function(a){if("connected"===this.state&&
"function"===typeof this.onmessage)this.onmessage(a)};f.linear.transport.prototype.disconnect=function(){"disconnected"!==this.state&&(this.state="disconnecting",this.sendbuffer=[],"function"===typeof this.raw.disconnect&&this.raw.disconnect())};f.linear.transport.prototype.send=function(a){var b,c=Object.prototype.toString.call(a);if(!("disconnecting"===this.state||"disconnected"===this.state))if("connecting"===this.state)this.sendbuffer[this.sendbuffer.length]=a;else{if("[object String]"===c)b=
a;else if("[object Array]"===c||"[object ArrayBuffer]"===c||"[object Uint8Array]"===c)if("text"===this.raw.type){b=[];for(var c=0,j=a.length;c<j;++c)b[c]=this.num2bin[a[c]];b=f.linear.btoa(b.join(""))}else"binary"===this.raw.type&&(b=(new Uint8Array(a)).buffer);else return;this.raw.send(b)}};f.linear.transport.websocket=function(a){var b=this;b.socket=a;"binaryType"in b.socket?(b.socket.binaryType="arraybuffer",b.type="binary"):b.type="text";b.socket.onopen=function(a){if(typeof b.onopen==="function")b.onopen(a)};
b.socket.onclose=b.socket.onerror=function(a){if(typeof b.onclose==="function")b.onclose(a);b.socket=void 0};b.socket.onmessage=function(a){if(typeof b.onmessage==="function")b.onmessage(a.data)}};f.linear.transport.websocket.prototype.disconnect=function(){this.socket.close()};f.linear.transport.websocket.prototype.send=function(a){this.socket.send(a)};f.linear.jsonp={load:function(a,b,c){var f=document.createElement("iframe");f.style.display="none";document.body.appendChild(f);var e=f.contentWindow.document,
k=!1;f[f.readyState?"onreadystatechange":"onload"]=function(){this.readyState&&"complete"!=this.readyState||k||(k=!0,e.x?"function"===typeof b&&b.apply(this,e.x):"function"===typeof c&&c(),setTimeout(function(){try{f.parentNode.removeChild(f)}catch(a){}},0))};a=a+(0>a.indexOf("?")?"?":"&")+"f=cb&"+(new Date).getTime();e.write('<script>function cb(){document.x=arguments}<\/script><script src="'+a+'"><\/script>');e.close();return f},abort:function(a){a&&a.parentNode&&a.parentNode.removeChild(a)}};f.linear.transport.polling=
function(a,b,c,j,e){this.type="text";this.url=a;this.channel=b;this.options=c||{};this.seq=0;this.sid=void 0;var k=this,l="?c=connect&ch="+this.channel;k.state="connecting";f.linear.jsonp.load(this.url+l,function(a){k.sid=a.sid;"connecting"!==k.state?(l="?c=disconnect&sid="+k.sid,f.linear.jsonp.load(k.url+l)):(k.dopoll(),"function"===typeof j&&j())},e)};f.linear.transport.polling.prototype.disconnect=function(){var a="?c=disconnect&sid="+this.sid;if("disconnecting"!==this.state&&(this.state="disconnecting",
this.intervaltimer&&clearTimeout(this.intervaltimer),this.seq=this.intervaltimer=0,void 0!==this.sid&&f.linear.jsonp.load(this.url+a),this.sid=void 0,"function"===typeof this.onclose))this.onclose()};f.linear.transport.polling.prototype.send=function(a){function b(a,c){if(c.confirmed)try{a.parentNode.removeChild(a),c.parentNode.removeChild(c)}catch(e){}else c.confirmed=!0,a.submit(),setTimeout(function(){b(a,c)},k)}var c,f,e,k=this.options.gc||3E3;void 0===this.sid||"disconnecting"===this.state||
(c=document.createElement("form"),c.style.display="none",c.action=this.url,c.method="POST",c.target="ifr"+this.seq,document.body.appendChild(c),f=document.createElement("input"),f.type="text",f.name="sid",f.value=this.sid,c.appendChild(f),f=document.createElement("input"),f.type="text",f.name="data",f.value=a,c.appendChild(f),e=document.createElement("iframe"),e.style.display="none",e.name="ifr"+this.seq++,e.src="about:blank",e.onload=function(){b(c,e)},document.all&&(e.onreadystatechange=function(){"complete"===
this.readyState&&(e.contentWindow.name=e.name,b(c,e))}),document.body.appendChild(e))};f.linear.transport.polling.prototype.dopoll=function(){function a(a){if(a&&"function"===typeof c.onmessage)c.onmessage(a);c.intervaltimer=setTimeout(function(){c.dopoll()},j)}function b(){c.disconnect()}var c=this,j,e="?c=poll&sid="+this.sid;void 0===this.sid||"disconnecting"===this.state||(j=c.options?c.options.interval||250:250,f.linear.jsonp.load(this.url+e,a,b))};f.linear.client=function(a){var b=this,c,j;if("function"!==
typeof b){for(var e in a)"protocol"===e.toLowerCase()&&(c=a[e]),"transports"===e.toLowerCase()&&(j=a[e]);c=c?c:"linear";try{b.protocol=new f.linear.protocol[c]}catch(k){console&&console.log("protocol: "+c+" is not implemented."),b.protocol=new f.linear.protocol.linear}b.transport=new f.linear.transport;b.transport.onopen=function(a){b._onopen(a)};b.transport.onclose=function(a){b._onclose(a)};b.transport.onmessage=function(a){b._onmessage(a)};b.transport.entry={};a=Object.prototype.toString.call(j);
if("[object String]"===a){if(a=f.linear.transport.create({type:j}))b.transport.entry[a.type]=a.entry}else if("[object Array]"===a){c=0;for(e=j.length;c<e;c++)if(a="string"===typeof j[c]?f.linear.transport.create({type:j[c]}):f.linear.transport.create(j[c]))b.transport.entry[a.type]=a.entry,a=void 0}else if(void 0!==j&&"[object Object]"===a){if(a=f.linear.transport.create(j))b.transport.entry[a.type]=a.entry}else a=f.linear.transport.create({type:"websocket"}),b.transport.entry[a.type]=a.entry,a=f.linear.transport.create({type:"polling"}),
b.transport.entry[a.type]=a.entry;return b}};f.linear.client.prototype.state=function(){return this.transport.state};f.linear.client.prototype.connect=function(a){"function"===typeof this.transport.connect&&this.transport.connect(a)};f.linear.client.prototype.onconnect=function(a){"function"===typeof a&&(this.onconnect=a)};f.linear.client.prototype.disconnect=function(){"function"===typeof this.transport.disconnect&&this.transport.disconnect()};f.linear.client.prototype.ondisconnect=function(a){"function"===
typeof a&&(this.ondisconnect=a)};f.linear.client.prototype.request=function(a){var b;if("function"===typeof this.protocol.request){if("disconnected"===this.transport.state||"disconnecting"===this.transport.state)return-1;try{b=this.protocol.request(a)}catch(c){return-1}if(!b)return-1;this.transport.send(b.data)}else return-1;return b.id};f.linear.client.prototype.onresponse=function(a){"function"===typeof a&&(this.onresponse=a)};f.linear.client.prototype.response=function(a){var b;if("function"===
typeof this.protocol.response){if("disconnected"===this.transport.state||"disconnecting"===this.transport.state)return!1;try{b=this.protocol.response(a)}catch(c){return!1}if(!b)return!1;this.transport.send(b)}else return!1;return!0};f.linear.client.prototype.notify=function(a){var b;if("function"===typeof this.protocol.notify){if("disconnected"===this.transport.state||"disconnecting"===this.transport.state)return!1;try{b=this.protocol.notify(a)}catch(c){return!1}if(!b)return!1;this.transport.send(b)}else return!1;
return!0};f.linear.client.prototype.onnotify=function(a){"function"===typeof a&&(this.onnotify=a)};f.linear.client.prototype._onopen=function(){var a;this.hasOwnProperty("onconnect")&&"function"===typeof this.onconnect&&(document?"createEvent"in document?(a=document.createEvent("Event"),a.initEvent("connected",!0,!0)):"createEventObject"in document?(a=document.createEventObject(),a.type="connected"):a={type:"connected"}:a={type:"connected"},this.onconnect(a))};f.linear.client.prototype._onclose=function(){var a;
this.protocol.reset();this.hasOwnProperty("ondisconnect")&&"function"===typeof this.ondisconnect&&(document?"createEvent"in document?(a=document.createEvent("Event"),a.initEvent("disconnected",!0,!0)):"createEventObject"in document?(a=document.createEventObject(),a.type="disconnected"):a={type:"disconnected"}:a={type:"disconnected"},this.ondisconnect(a))};f.linear.client.prototype._onmessage=function(a){for(var a=this.protocol.onmessage(a),b=0,c=a.length;b<c;b++)"request"===a[b].type?this.hasOwnProperty("onrequest")&&
"function"===typeof this.onrequest&&this.onrequest.call(this,a[b].data):"response"===a[b].type?this.hasOwnProperty("onresponse")&&"function"===typeof this.onresponse&&this.onresponse.call(this,a[b].data):"notify"===a[b].type&&this.hasOwnProperty("onnotify")&&"function"===typeof this.onnotify&&this.onnotify.call(this,a[b].data)}}(this);
